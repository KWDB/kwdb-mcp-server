---
title: 故障排查
id: troubleshooting
---

# 故障排查

## 数据库连接失败

如果无法连接 KWDB 数据库，请从以下几个方便排查问题：

- 检查数据库连接字符串是否正确。
- 检查用户主机是否可以正常访问 KWDB 数据库。
- 检查数据库用户是否具有足够的权限。
- 检查 LLM Agent 中 KWDB MCP Server 配置中数据库的连接地址否正确。
- 检查是否阻塞端口的现有 `kwdb-mcp-server` 进程。

## SSE 模式相关问题

| 问题       | 处理策略                                                                                 |
|----------|--------------------------------------------------------------------------------------|
| 连接被拒绝 | 确保 KWDB MCP Server 正常运行并监听指定地址。                                             |
| CORS 错误  | 如果通过 Web 浏览器访问 KWDB 数据库，确保 KWDB MCP Server 的基础 URL 与数据库的 URL 匹配。 |
| 网络问题   | 检查防火墙规则或网络配置，确认是否阻止连接。                                               |
| 数据库连接 | 确保 KWDB MCP Server 可以正常访问数据库。                                                 |

## 错误码

下表列出 KWDB MCP Server 相关的错误码。

| 错误码    | 错误原因   | 处理策略            |
|-----------|--------|-----------------|
| KWDB-4001 | 语法错误   | 返回具体错误位置    |
| KWDB-4002 | 权限不足   | 中断执行并告警      |
| KWDB-4003 | 连接超时   | 重试机制（最多 3 次） |
| KWDB-4004 | 资源不存在 | 返回 404 状态码     |
